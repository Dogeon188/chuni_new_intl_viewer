(function(){"use strict";function Ve(e){const t=document.cookie.split(";").map(n=>decodeURIComponent(n.trim())).map(n=>n.split("=")).find(n=>n[0]===e);return t?t[1]:""}function He(){return/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)}function Ie(e){return Number([...e].filter(t=>t!==",").join(""))}function v(){}function wt(e){return e&&typeof e=="object"&&typeof e.then=="function"}function Ue(e){return e()}function We(){return Object.create(null)}function K(e){e.forEach(Ue)}function _t(e){return typeof e=="function"}function U(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function yt(e){return Object.keys(e).length===0}function xt(e,...t){if(e==null)return v;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function Q(e,t,n){e.$$.on_destroy.push(xt(t,n))}function Ge(e,t,n){return e.set(n),t}function d(e,t){e.appendChild(t)}function Y(e,t,n){const r=kt(e);if(!r.getElementById(t)){const i=m("style");i.id=t,i.textContent=n,$t(r,i)}}function kt(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function $t(e,t){d(e.head||e,t)}function k(e,t,n){e.insertBefore(t,n||null)}function x(e){e.parentNode.removeChild(e)}function Je(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function m(e){return document.createElement(e)}function E(e){return document.createTextNode(e)}function _(){return E(" ")}function W(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function w(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function St(e){return Array.from(e.childNodes)}function O(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function qe(e,t){for(let n=0;n<e.options.length;n+=1){const r=e.options[n];if(r.__value===t){r.selected=!0;return}}e.selectedIndex=-1}function Ct(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}function F(e,t,n){e.classList[n?"add":"remove"](t)}let le;function B(e){le=e}function Rt(){if(!le)throw new Error("Function called outside component initialization");return le}const ce=[],Ce=[],he=[],Re=[],Tt=Promise.resolve();let Te=!1;function Et(){Te||(Te=!0,Tt.then(Pe))}function ge(e){he.push(e)}function Pt(e){Re.push(e)}const Ee=new Set;let pe=0;function Pe(){const e=le;do{for(;pe<ce.length;){const t=ce[pe];pe++,B(t),zt(t.$$)}for(B(null),ce.length=0,pe=0;Ce.length;)Ce.pop()();for(let t=0;t<he.length;t+=1){const n=he[t];Ee.has(n)||(Ee.add(n),n())}he.length=0}while(ce.length);for(;Re.length;)Re.pop()();Te=!1,Ee.clear(),B(e)}function zt(e){if(e.fragment!==null){e.update(),K(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ge)}}const me=new Set;let N;function Lt(){N={r:0,c:[],p:N}}function At(){N.r||K(N.c),N=N.p}function P(e,t){e&&e.i&&(me.delete(e),e.i(t))}function L(e,t,n,r){if(e&&e.o){if(me.has(e))return;me.add(e),N.c.push(()=>{me.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}}function ze(e,t){const n=t.token={};function r(i,o,s,l){if(t.token!==n)return;t.resolved=l;let c=t.ctx;s!==void 0&&(c=c.slice(),c[s]=l);const a=i&&(t.current=i)(c);let f=!1;t.block&&(t.blocks?t.blocks.forEach((u,h)=>{h!==o&&u&&(Lt(),L(u,1,1,()=>{t.blocks[h]===u&&(t.blocks[h]=null)}),At())}):t.block.d(1),a.c(),P(a,1),a.m(t.mount(),t.anchor),f=!0),t.block=a,t.blocks&&(t.blocks[o]=a),f&&Pe()}if(wt(e)){const i=Rt();if(e.then(o=>{B(i),r(t.then,1,t.value,o),B(null)},o=>{if(B(i),r(t.catch,2,t.error,o),B(null),!t.hasCatch)throw o}),t.current!==t.pending)return r(t.pending,0),!0}else{if(t.current!==t.then)return r(t.then,1,t.value,e),!0;t.resolved=e}}function Le(e,t,n){const r=t.slice(),{resolved:i}=e;e.current===e.then&&(r[e.value]=i),e.current===e.catch&&(r[e.error]=i),e.block.p(r,n)}function jt(e,t,n){const r=e.$$.props[t];r!==void 0&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}function V(e){e&&e.c()}function M(e,t,n,r){const{fragment:i,on_mount:o,on_destroy:s,after_update:l}=e.$$;i&&i.m(t,n),r||ge(()=>{const c=o.map(Ue).filter(_t);s?s.push(...c):K(c),e.$$.on_mount=[]}),l.forEach(ge)}function D(e,t){const n=e.$$;n.fragment!==null&&(K(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Ft(e,t){e.$$.dirty[0]===-1&&(ce.push(e),Et(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ee(e,t,n,r,i,o,s,l=[-1]){const c=le;B(e);const a=e.$$={fragment:null,ctx:null,props:o,update:v,not_equal:i,bound:We(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(c?c.$$.context:[])),callbacks:We(),dirty:l,skip_bound:!1,root:t.target||c.$$.root};s&&s(a.root);let f=!1;if(a.ctx=n?n(e,t.props||{},(u,h,...g)=>{const p=g.length?g[0]:h;return a.ctx&&i(a.ctx[u],a.ctx[u]=p)&&(!a.skip_bound&&a.bound[u]&&a.bound[u](p),f&&Ft(e,u)),h}):[],a.update(),f=!0,K(a.before_update),a.fragment=r?r(a.ctx):!1,t.target){if(t.hydrate){const u=St(t.target);a.fragment&&a.fragment.l(u),u.forEach(x)}else a.fragment&&a.fragment.c();t.intro&&P(e.$$.fragment),M(e,t.target,t.anchor,t.customElement),Pe()}B(c)}class te{$destroy(){D(this,1),this.$destroy=v}$on(t,n){const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(t){this.$$set&&!yt(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function Xe(e,t){t*=100;const n=[[101e4,t+215],[1009e3,t+215],[1007500,t+200],[1005e3,t+150],[1e6,t+100],[975e3,t],[925e3,t-300],[9e5,t-500],[8e5,(t-500)/2],[5e5,0],[0,0]];let r=1;n.some((l,c)=>(r=c,e>l[0]));const i=n[r-1],o=n[r],s=o[1]+(i[1]-o[1])/(i[0]-o[0])*(e-o[0]);return Math.floor(s+Number.EPSILON)/100}function Ae(e){return e.slice(0,30).reduce((t,n)=>t+n)/30}function Ze(e){return(Ae(e)*30+e[0]*10)/40}const oe=[];function je(e,t=v){let n;const r=new Set;function i(l){if(U(e,l)&&(e=l,n)){const c=!oe.length;for(const a of r)a[1](),oe.push(a,e);if(c){for(let a=0;a<oe.length;a+=2)oe[a][0](oe[a+1]);oe.length=0}}}function o(l){i(l(e))}function s(l,c=v){const a=[l,c];return r.add(a),r.size===1&&(n=t(i)||v),l(e),()=>{r.delete(a),r.size===0&&(n(),n=null)}}return{set:i,update:o,subscribe:s}}function Ke(e=!1,t=n=>{}){const{subscribe:n,set:r,update:i}=je(e);return{subscribe:n,set(o){r(o),t(o)},toggle:()=>i(o=>!o)}}const be=je(""),ve=Ke(He(),e=>{e&&ne.set("Rating")}),ne=(()=>{const{subscribe:e,set:t,update:n}=je("Rating");return{subscribe:e,set(r){t(r),r!="Rating"&&ve.set(!1)},update:n}})(),we=Ke(),H={basic:"BAS",advanced:"ADV",expert:"EXP",master:"MAS",ultima:"ULT"};async function Mt(e=H.master){const t=new FormData;t.append("genre","99"),t.append("token",Ve("_t"));const n={[H.ultima]:"sendUltima",[H.master]:"sendMaster",[H.expert]:"sendExpert",[H.advanced]:"sendAdvanced",[H.basic]:"sendBasic"},r=await fetch(`https://chunithm-net-eng.com/mobile/record/musicGenre/${n[e]}`,{headers:{"Cache-Control":"no-cache"},method:"POST",body:t}),i=[...$(await r.text()).find("form")];return i.shift(),i}async function Dt(){const e=[];for(const t of Object.values(H))be.set(`Fetching ${t} record...`),e.push(await Mt(t));return e.flatMap((t,n)=>t.map(r=>{var s,l;const i=$(r),o=i.find(".play_musicdata_icon");return{title:(s=i.find(".music_title"))==null?void 0:s.text(),score:Ie((l=i.find(".text_b"))==null?void 0:l.text()),difficulty:Object.values(H)[n],clear:o.find('img[src*="alljustice"]').length?"AJ":o.find('img[src*="fullcombo"]').length?"FC":""}}).filter(r=>r.title!==null&&r.score>0))}async function Ot(){be.set("Fetching song data...");const e=await(await fetch("https://raw.githubusercontent.com/Dogeon188/chuni_new_intl_viewer/main/songData.json")).json(),t=await Dt();return be.set("Calculating data..."),t.map(n=>{const r=e[n.title];if(r===void 0){alert(`[chuni-intl-viewer] Found unknown song "${n.title} ${n.difficulty}".
The data should be updating soon, please run chuni-viewer again later to get proper song data.`),fetch(new Request("https://chuniupdate.dogeon188.repl.co/sendUpdate",{method:"POST"})),n.const=0,n.rating=0;return}n.const=r[n.difficulty],n.rating=Xe(n.score,n.const)}),t.sort((n,r)=>r.rating-n.rating||r.const-n.const||n.score-r.score),t.map((n,r)=>{n.rank=r+1}),t}async function Bt(){var i;const e=await fetch("https://chunithm-net-eng.com/mobile/home/"),t=$(await e.text()),n=[...t.find(".player_rating_num_block img")].map(o=>{var c,a;const s=(c=o.getAttribute("src"))!=null?c:"";return/rating_.*_comma.png/.test(s)?".":((a=/rating_.*_[0-9]*(?=\.png)/g.exec(s))!=null?a:["**.**"])[0].slice(-1)}).join(""),r=t.find(".player_honor_short").css("background-image");return{name:t.find(".player_name_in")[0].innerHTML,honor:{text:t.find(".player_honor_text_view span")[0].innerHTML,type:((i=/honor_bg_.*(?=\.png)/g.exec(r))!=null?i:["normal"])[0].slice(9)},rating:n}}async function Vt(){const e=await fetch("https://chunithm-net-eng.com/mobile/home/playerData/ratingDetailRecent/"),t=await(await fetch("https://raw.githubusercontent.com/Dogeon188/chuni_new_intl_viewer/main/songData.json")).json();return[...$(await e.text()).find("form")].map(r=>{var s,l,c;const i=$(r),o={score:Ie((s=i.find(".text_b"))==null?void 0:s.text()),title:(l=i.find(".music_title"))==null?void 0:l.text(),diff:Object.values(H)[+((c=i.find("input[name=diff]"))==null?void 0:c.attr("value"))]};return Xe(o.score,t[o.title][o.diff])}).reduce((r,i)=>r+i)/10}function Ht(e){Y(e,"svelte-wrzpb1","table.svelte-wrzpb1.svelte-wrzpb1{border-spacing:0;width:100%;padding-bottom:0.5rem;max-width:max-content;margin:auto}td.svelte-wrzpb1.svelte-wrzpb1,th.svelte-wrzpb1.svelte-wrzpb1{padding:0.5rem}td.svelte-wrzpb1.svelte-wrzpb1{border-top:#436 1.5px solid}th.svelte-wrzpb1.svelte-wrzpb1{color:#aac}th.current-sort.svelte-wrzpb1.svelte-wrzpb1{color:#eec}tbody.svelte-wrzpb1 tr.best30 td.svelte-wrzpb1:first-child{color:#fc4}tbody.svelte-wrzpb1 tr.best40 td.svelte-wrzpb1:first-child{font-weight:bold}tbody.svelte-wrzpb1 tr:not(.best40) td.svelte-wrzpb1:first-child{color:#ccc}tbody.svelte-wrzpb1 tr td.svelte-wrzpb1:nth-child(2){font-weight:bold;text-align:left;max-width:300px}tbody.svelte-wrzpb1 tr td:nth-child(2)[data-diff=ULT].svelte-wrzpb1{color:#3cf}tbody.svelte-wrzpb1 tr td:nth-child(2)[data-diff=MAS].svelte-wrzpb1{color:#e9f}tbody.svelte-wrzpb1 tr td:nth-child(2)[data-diff=EXP].svelte-wrzpb1{color:#e46}tbody.svelte-wrzpb1 tr td:nth-child(2)[data-diff=ADV].svelte-wrzpb1{color:#e73}tbody.svelte-wrzpb1 tr td:nth-child(2)[data-diff=BAS].svelte-wrzpb1{color:#1c3}tbody.svelte-wrzpb1 tr td.svelte-wrzpb1:nth-child(6){font-weight:bold}tbody.svelte-wrzpb1 tr td:nth-child(6)[data-clear=FC].svelte-wrzpb1{color:#5e7}tbody.svelte-wrzpb1 tr td:nth-child(6)[data-clear=AJ].svelte-wrzpb1{color:#fc1}")}function Qe(e,t,n){const r=e.slice();return r[8]=t[n],r}function Ye(e,t,n){const r=e.slice();return r[11]=t[n],r}function Ne(e){let t,n,r,i;function o(){return e[6](e[11])}return{c(){t=m("th"),n=E(e[11]),w(t,"class","svelte-wrzpb1"),F(t,"current-sort",e[11]==e[0])},m(s,l){k(s,t,l),d(t,n),r||(i=W(t,"click",o),r=!0)},p(s,l){e=s,l&1&&F(t,"current-sort",e[11]==e[0])},d(s){s&&x(t),r=!1,i()}}}function et(e){var Se,de,R,Z;let t,n,r=e[8].rank+"",i,o,s,l=e[8].title+"",c,a,f,u,h=((de=(Se=e[8].const)==null?void 0:Se.toFixed(1))!=null?de:"??.?")+"",g,p,y,b=e[8].score+"",C,I,re,j=((Z=(R=e[8].rating)==null?void 0:R.toFixed(2))!=null?Z:"??.??")+"",ie,ue,T,J=e[8].clear+"",q,X,fe;return{c(){t=m("tr"),n=m("td"),i=E(r),o=_(),s=m("td"),c=E(l),f=_(),u=m("td"),g=E(h),p=_(),y=m("td"),C=E(b),I=_(),re=m("td"),ie=E(j),ue=_(),T=m("td"),q=E(J),fe=_(),w(n,"class","svelte-wrzpb1"),w(s,"data-diff",a=e[8].difficulty),w(s,"class","svelte-wrzpb1"),w(u,"class","svelte-wrzpb1"),w(y,"class","svelte-wrzpb1"),w(re,"class","svelte-wrzpb1"),w(T,"data-clear",X=e[8].clear),w(T,"class","svelte-wrzpb1"),F(t,"best30",e[8].rank<=30),F(t,"best40",e[8].rank<=40)},m(S,A){k(S,t,A),d(t,n),d(n,i),d(t,o),d(t,s),d(s,c),d(t,f),d(t,u),d(u,g),d(t,p),d(t,y),d(y,C),d(t,I),d(t,re),d(re,ie),d(t,ue),d(t,T),d(T,q),d(t,fe)},p(S,A){var pt,mt,bt,vt;A&2&&r!==(r=S[8].rank+"")&&O(i,r),A&2&&l!==(l=S[8].title+"")&&O(c,l),A&2&&a!==(a=S[8].difficulty)&&w(s,"data-diff",a),A&2&&h!==(h=((mt=(pt=S[8].const)==null?void 0:pt.toFixed(1))!=null?mt:"??.?")+"")&&O(g,h),A&2&&b!==(b=S[8].score+"")&&O(C,b),A&2&&j!==(j=((vt=(bt=S[8].rating)==null?void 0:bt.toFixed(2))!=null?vt:"??.??")+"")&&O(ie,j),A&2&&J!==(J=S[8].clear+"")&&O(q,J),A&2&&X!==(X=S[8].clear)&&w(T,"data-clear",X),A&2&&F(t,"best30",S[8].rank<=30),A&2&&F(t,"best40",S[8].rank<=40)},d(S){S&&x(t)}}}function It(e){let t,n,r,i,o,s,l,c,a,f=["Title","Const","Score","Rating","AJ"],u=[];for(let p=0;p<5;p+=1)u[p]=Ne(Ye(e,f,p));let h=e[1],g=[];for(let p=0;p<h.length;p+=1)g[p]=et(Qe(e,h,p));return{c(){t=m("table"),n=m("thead"),r=m("tr"),i=m("th"),i.textContent="#",o=_();for(let p=0;p<5;p+=1)u[p].c();s=_(),l=m("tbody");for(let p=0;p<g.length;p+=1)g[p].c();w(i,"class","svelte-wrzpb1"),w(l,"class","svelte-wrzpb1"),w(t,"class","svelte-wrzpb1")},m(p,y){k(p,t,y),d(t,n),d(n,r),d(r,i),d(r,o);for(let b=0;b<5;b+=1)u[b].m(r,null);d(t,s),d(t,l);for(let b=0;b<g.length;b+=1)g[b].m(l,null);c||(a=W(i,"click",e[5]),c=!0)},p(p,[y]){if(y&1){f=["Title","Const","Score","Rating","AJ"];let b;for(b=0;b<5;b+=1){const C=Ye(p,f,b);u[b]?u[b].p(C,y):(u[b]=Ne(C),u[b].c(),u[b].m(r,null))}for(;b<5;b+=1)u[b].d(1)}if(y&2){h=p[1];let b;for(b=0;b<h.length;b+=1){const C=Qe(p,h,b);g[b]?g[b].p(C,y):(g[b]=et(C),g[b].c(),g[b].m(l,null))}for(;b<g.length;b+=1)g[b].d(1);g.length=h.length}},i:v,o:v,d(p){p&&x(t),Je(u,p),Je(g,p),c=!1,a()}}}function Ut(e,t,n){let r,i,o,s;Q(e,ve,u=>n(4,o=u)),Q(e,ne,u=>n(0,s=u));let{recordList:l}=t;const c={Rating:(u,h)=>u.rank-h.rank,Score:(u,h)=>h.score-u.score,Const:(u,h)=>h.const-u.const,Title:(u,h)=>{if(u.title<h.title)return-1;if(u.title>h.title)return 1;const g=["ULT","MAS","EXP","ADV","BAS"];return g.indexOf(h.difficulty)-g.indexOf(u.difficulty)},AJ:(u,h)=>{if(u.clear==h.clear)return u.rank-h.rank;const g=["","FC","AJ"];return g.indexOf(h.clear)-g.indexOf(u.clear)}},a=()=>Ge(ne,s="Rating",s),f=u=>Ge(ne,s=u,s);return e.$$set=u=>{"recordList"in u&&n(2,l=u.recordList)},e.$$.update=()=>{e.$$.dirty&5&&n(3,r=l.sort(c[s])),e.$$.dirty&24&&n(1,i=o?r.slice(0,40):r)},[s,i,l,r,o,a,f]}class Wt extends te{constructor(t){super(),ee(this,t,Ut,It,U,{recordList:2},Ht)}}var tt=globalThis&&globalThis.__awaiter||function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function l(f){try{a(r.next(f))}catch(u){s(u)}}function c(f){try{a(r.throw(f))}catch(u){s(u)}}function a(f){f.done?o(f.value):i(f.value).then(l,c)}a((r=r.apply(e,t||[])).next())})};const nt="application/font-woff",rt="image/jpeg",Gt={woff:nt,woff2:nt,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:rt,jpeg:rt,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"};function Jt(e){const t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}function _e(e){const t=Jt(e).toLowerCase();return Gt[t]||""}function qt(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const n=document.implementation.createHTMLDocument(),r=n.createElement("base"),i=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(i),t&&(r.href=t),i.href=e,i.href}function Fe(e){return e.search(/^(data:)/)!==-1}function ye(e,t){return`data:${t};base64,${e}`}function Xt(e){return e.split(/,/)[1]}const Zt=function(){let t=0;const n=()=>`0000${(Math.random()*Math.pow(36,4)<<0).toString(36)}`.slice(-4);return()=>(t+=1,`u${n()}${t}`)}();function G(e){const t=[];for(let n=0,r=e.length;n<r;n+=1)t.push(e[n]);return t}function xe(e,t){const n=window.getComputedStyle(e).getPropertyValue(t);return parseFloat(n.replace("px",""))}function Kt(e){const t=xe(e,"border-left-width"),n=xe(e,"border-right-width");return e.clientWidth+t+n}function Qt(e){const t=xe(e,"border-top-width"),n=xe(e,"border-bottom-width");return e.clientHeight+t+n}function Yt(){let e,t;try{t=process}catch{}const n=t&&t.env?t.env.devicePixelRatio:null;return n&&(e=parseInt(n,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}function Nt(e){return e.toBlob?new Promise(t=>e.toBlob(t)):new Promise(t=>{const n=window.atob(e.toDataURL().split(",")[1]),r=n.length,i=new Uint8Array(r);for(let o=0;o<r;o+=1)i[o]=n.charCodeAt(o);t(new Blob([i],{type:"image/png"}))})}function Me(e){return new Promise((t,n)=>{const r=new Image;r.onload=()=>t(r),r.onerror=n,r.crossOrigin="anonymous",r.decoding="sync",r.src=e})}function en(e){return tt(this,void 0,void 0,function*(){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(t=>`data:image/svg+xml;charset=utf-8,${t}`)})}function tn(e,t,n){return tt(this,void 0,void 0,function*(){const r="http://www.w3.org/2000/svg",i=document.createElementNS(r,"svg"),o=document.createElementNS(r,"foreignObject");return i.setAttribute("width",`${t}`),i.setAttribute("height",`${n}`),i.setAttribute("viewBox",`0 0 ${t} ${n}`),o.setAttribute("width","100%"),o.setAttribute("height","100%"),o.setAttribute("x","0"),o.setAttribute("y","0"),o.setAttribute("externalResourcesRequired","true"),i.appendChild(o),o.appendChild(e),en(i)})}const De={};function nn(e){let t=e.replace(/\?.*/,"");return/ttf|otf|eot|woff2?/i.test(t)&&(t=t.replace(/.*\//,"")),t}function Oe(e,t){const n=nn(e);if(De[n]!=null)return De[n];t.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());const r=o=>{let s="";if(t.imagePlaceholder){const c=t.imagePlaceholder.split(/,/);c&&c[1]&&(s=c[1])}let l=`Failed to fetch resource: ${e}`;return o&&(l=typeof o=="string"?o:o.message),l&&console.error(l),{blob:s,contentType:""}},i=window.fetch(e).then(o=>o.blob().then(s=>({blob:s,contentType:o.headers.get("Content-Type")||""}))).then(({blob:o,contentType:s})=>new Promise((l,c)=>{const a=new FileReader;a.onloadend=()=>l({contentType:s,blob:a.result}),a.onerror=c,a.readAsDataURL(o)})).then(({blob:o,contentType:s})=>({contentType:s,blob:Xt(o)})).catch(r);return De[n]=i,i}function rn(e){const t=e.getPropertyValue("content");return`${e.cssText} content: '${t.replace(/'|"/g,"")}';`}function on(e){return G(e).map(t=>{const n=e.getPropertyValue(t),r=e.getPropertyPriority(t);return`${t}: ${n}${r?" !important":""};`}).join(" ")}function sn(e,t,n){const r=`.${e}:${t}`,i=n.cssText?rn(n):on(n);return document.createTextNode(`${r}{${i}}`)}function it(e,t,n){const r=window.getComputedStyle(e,n),i=r.getPropertyValue("content");if(i===""||i==="none")return;const o=Zt();try{t.className=`${t.className} ${o}`}catch{return}const s=document.createElement("style");s.appendChild(sn(o,n,r)),t.appendChild(s)}function ln(e,t){it(e,t,":before"),it(e,t,":after")}var se=globalThis&&globalThis.__awaiter||function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function l(f){try{a(r.next(f))}catch(u){s(u)}}function c(f){try{a(r.throw(f))}catch(u){s(u)}}function a(f){f.done?o(f.value):i(f.value).then(l,c)}a((r=r.apply(e,t||[])).next())})};function cn(e){return se(this,void 0,void 0,function*(){const t=e.toDataURL();return t==="data:,"?Promise.resolve(e.cloneNode(!1)):Me(t)})}function an(e,t){return se(this,void 0,void 0,function*(){return Promise.resolve(e.poster).then(n=>Oe(n,t)).then(n=>ye(n.blob,_e(e.poster)||n.contentType)).then(n=>Me(n))})}function un(e,t){return se(this,void 0,void 0,function*(){return e instanceof HTMLCanvasElement?cn(e):e instanceof HTMLVideoElement&&e.poster?an(e,t):Promise.resolve(e.cloneNode(!1))})}const fn=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SLOT";function dn(e,t,n){var r;return se(this,void 0,void 0,function*(){const i=fn(e)&&e.assignedNodes?G(e.assignedNodes()):G(((r=e.shadowRoot)!==null&&r!==void 0?r:e).childNodes);return i.length===0||e instanceof HTMLVideoElement?Promise.resolve(t):i.reduce((o,s)=>o.then(()=>ot(s,n)).then(l=>{l&&t.appendChild(l)}),Promise.resolve()).then(()=>t)})}function hn(e,t){const n=window.getComputedStyle(e),r=t.style;!r||(n.cssText?r.cssText=n.cssText:G(n).forEach(i=>{r.setProperty(i,n.getPropertyValue(i),n.getPropertyPriority(i))}))}function gn(e,t){e instanceof HTMLTextAreaElement&&(t.innerHTML=e.value),e instanceof HTMLInputElement&&t.setAttribute("value",e.value)}function pn(e,t){return se(this,void 0,void 0,function*(){return t instanceof Element?Promise.resolve().then(()=>hn(e,t)).then(()=>ln(e,t)).then(()=>gn(e,t)).then(()=>t):Promise.resolve(t)})}function ot(e,t,n){return se(this,void 0,void 0,function*(){return!n&&t.filter&&!t.filter(e)?Promise.resolve(null):Promise.resolve(e).then(r=>un(r,t)).then(r=>dn(e,r,t)).then(r=>pn(e,r))})}var mn=globalThis&&globalThis.__awaiter||function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function l(f){try{a(r.next(f))}catch(u){s(u)}}function c(f){try{a(r.throw(f))}catch(u){s(u)}}function a(f){f.done?o(f.value):i(f.value).then(l,c)}a((r=r.apply(e,t||[])).next())})};const st=/url\((['"]?)([^'"]+?)\1\)/g,bn=/url\([^)]+\)\s*format\((["'])([^"']+)\1\)/g,vn=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function wn(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}function _n(e){const t=[];return e.replace(st,(n,r,i)=>(t.push(i),n)),t.filter(n=>!Fe(n))}function yn(e,t,n,r,i){const o=n?qt(t,n):t;return Promise.resolve(o).then(s=>i?i(s):Oe(s,r)).then(s=>typeof s=="string"?ye(s,_e(t)):ye(s.blob,_e(t)||s.contentType)).then(s=>e.replace(wn(t),`$1${s}$3`)).then(s=>s,()=>o)}function xn(e,{preferredFontFormat:t}){return t?e.replace(vn,n=>{for(;;){const[r,,i]=bn.exec(n)||[];if(!i)return"";if(i===t)return`src: ${r};`}}):e}function lt(e){return e.search(st)!==-1}function ct(e,t,n){return mn(this,void 0,void 0,function*(){if(!lt(e))return Promise.resolve(e);const r=xn(e,n);return Promise.resolve(r).then(_n).then(i=>i.reduce((o,s)=>o.then(l=>yn(l,s,t,n)),Promise.resolve(r)))})}var ke=globalThis&&globalThis.__awaiter||function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function l(f){try{a(r.next(f))}catch(u){s(u)}}function c(f){try{a(r.throw(f))}catch(u){s(u)}}function a(f){f.done?o(f.value):i(f.value).then(l,c)}a((r=r.apply(e,t||[])).next())})};function kn(e,t){var n;return ke(this,void 0,void 0,function*(){const r=(n=e.style)===null||n===void 0?void 0:n.getPropertyValue("background");return r?Promise.resolve(r).then(i=>ct(i,null,t)).then(i=>(e.style.setProperty("background",i,e.style.getPropertyPriority("background")),e)):Promise.resolve(e)})}function $n(e,t){return ke(this,void 0,void 0,function*(){if(!(e instanceof HTMLImageElement&&!Fe(e.src))&&!(e instanceof SVGImageElement&&!Fe(e.href.baseVal)))return Promise.resolve(e);const n=e instanceof HTMLImageElement?e.src:e.href.baseVal;return Promise.resolve(n).then(r=>Oe(r,t)).then(r=>ye(r.blob,_e(n)||r.contentType)).then(r=>new Promise((i,o)=>{e.onload=i,e.onerror=o,e instanceof HTMLImageElement?(e.srcset="",e.src=r):e.href.baseVal=r})).then(()=>e,()=>e)})}function Sn(e,t){return ke(this,void 0,void 0,function*(){const r=G(e.childNodes).map(i=>at(i,t));return Promise.all(r).then(()=>e)})}function at(e,t){return ke(this,void 0,void 0,function*(){return e instanceof Element?Promise.resolve(e).then(n=>kn(n,t)).then(n=>$n(n,t)).then(n=>Sn(n,t)):Promise.resolve(e)})}function Cn(e,t){const{style:n}=e;t.backgroundColor&&(n.backgroundColor=t.backgroundColor),t.width&&(n.width=`${t.width}px`),t.height&&(n.height=`${t.height}px`);const r=t.style;return r!=null&&Object.keys(r).forEach(i=>{n[i]=r[i]}),e}var ae=globalThis&&globalThis.__awaiter||function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function l(f){try{a(r.next(f))}catch(u){s(u)}}function c(f){try{a(r.throw(f))}catch(u){s(u)}}function a(f){f.done?o(f.value):i(f.value).then(l,c)}a((r=r.apply(e,t||[])).next())})};const ut={};function ft(e){const t=ut[e];if(t!=null)return t;const n=window.fetch(e).then(r=>({url:e,cssText:r.text()}));return ut[e]=n,n}function dt(e){return ae(this,void 0,void 0,function*(){return e.cssText.then(t=>{let n=t;const r=/url\(["']?([^"')]+)["']?\)/g,o=(n.match(/url\([^)]+\)/g)||[]).map(s=>{let l=s.replace(r,"$1");return l.startsWith("https://")||(l=new URL(l,e.url).href),window.fetch(l).then(c=>c.blob()).then(c=>new Promise((a,f)=>{const u=new FileReader;u.onloadend=()=>{n=n.replace(s,`url(${u.result})`),a([s,u.result])},u.onerror=f,u.readAsDataURL(c)}))});return Promise.all(o).then(()=>n)})})}function ht(e){if(e==null)return[];const t=[],n=/(\/\*[\s\S]*?\*\/)/gi;let r=e.replace(n,"");const i=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const c=i.exec(r);if(c===null)break;t.push(c[0])}r=r.replace(i,"");const o=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,s="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",l=new RegExp(s,"gi");for(;;){let c=o.exec(r);if(c===null){if(c=l.exec(r),c===null)break;o.lastIndex=l.lastIndex}else l.lastIndex=o.lastIndex;t.push(c[0])}return t}function Rn(e){return ae(this,void 0,void 0,function*(){const t=[],n=[];return e.forEach(r=>{if("cssRules"in r)try{G(r.cssRules).forEach((i,o)=>{if(i.type===CSSRule.IMPORT_RULE){let s=o+1;const l=i.href,c=ft(l).then(a=>a?dt(a):"").then(a=>ht(a).forEach(f=>{try{r.insertRule(f,f.startsWith("@import")?s+=1:r.cssRules.length)}catch(u){console.error("Error inserting rule from remote css",{rule:f,error:u})}})).catch(a=>{console.error("Error loading remote css",a.toString())});n.push(c)}})}catch(i){const o=e.find(s=>s.href==null)||document.styleSheets[0];r.href!=null&&n.push(ft(r.href).then(s=>s?dt(s):"").then(s=>ht(s).forEach(l=>{o.insertRule(l,r.cssRules.length)})).catch(s=>{console.error("Error loading remote stylesheet",s.toString())})),console.error("Error inlining remote css file",i.toString())}}),Promise.all(n).then(()=>(e.forEach(r=>{if("cssRules"in r)try{G(r.cssRules).forEach(i=>{t.push(i)})}catch(i){console.error(`Error while reading CSS rules from ${r.href}`,i.toString())}}),t))})}function Tn(e){return e.filter(t=>t.type===CSSRule.FONT_FACE_RULE).filter(t=>lt(t.style.getPropertyValue("src")))}function En(e){return ae(this,void 0,void 0,function*(){return new Promise((t,n)=>{e.ownerDocument==null&&n(new Error("Provided element is not within a Document")),t(G(e.ownerDocument.styleSheets))}).then(t=>Rn(t)).then(Tn)})}function Pn(e,t){return ae(this,void 0,void 0,function*(){return En(e).then(n=>Promise.all(n.map(r=>{const i=r.parentStyleSheet?r.parentStyleSheet.href:null;return ct(r.cssText,i,t)}))).then(n=>n.join(`
`))})}function zn(e,t){return ae(this,void 0,void 0,function*(){return(t.fontEmbedCSS!=null?Promise.resolve(t.fontEmbedCSS):Pn(e,t)).then(n=>{const r=document.createElement("style"),i=document.createTextNode(n);return r.appendChild(i),e.firstChild?e.insertBefore(r,e.firstChild):e.appendChild(r),e})})}var Be=globalThis&&globalThis.__awaiter||function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function l(f){try{a(r.next(f))}catch(u){s(u)}}function c(f){try{a(r.throw(f))}catch(u){s(u)}}function a(f){f.done?o(f.value):i(f.value).then(l,c)}a((r=r.apply(e,t||[])).next())})};function gt(e,t={}){const n=t.width||Kt(e),r=t.height||Qt(e);return{width:n,height:r}}function Ln(e,t={}){return Be(this,void 0,void 0,function*(){const{width:n,height:r}=gt(e,t);return Promise.resolve(e).then(i=>ot(i,t,!0)).then(i=>zn(i,t)).then(i=>at(i,t)).then(i=>Cn(i,t)).then(i=>tn(i,n,r))})}const z=16384;function An(e){(e.width>z||e.height>z)&&(e.width>z&&e.height>z?e.width>e.height?(e.height*=z/e.width,e.width=z):(e.width*=z/e.height,e.height=z):e.width>z?(e.height*=z/e.width,e.width=z):(e.width*=z/e.height,e.height=z))}function jn(e,t={}){return Be(this,void 0,void 0,function*(){return Ln(e,t).then(Me).then(n=>{const r=document.createElement("canvas"),i=r.getContext("2d"),o=t.pixelRatio||Yt(),{width:s,height:l}=gt(e,t),c=t.canvasWidth||s,a=t.canvasHeight||l;return r.width=c*o,r.height=a*o,t.skipAutoScale||An(r),r.style.width=`${c}`,r.style.height=`${a}`,t.backgroundColor&&(i.fillStyle=t.backgroundColor,i.fillRect(0,0,r.width,r.height)),i.drawImage(n,0,0,r.width,r.height),r})})}function Fn(e,t={}){return Be(this,void 0,void 0,function*(){return jn(e,t).then(Nt)})}async function Mn(e="b40"){var r,i;const t=(r=document.body.shadowRoot)==null?void 0:r.querySelector("main");let n=t==null?void 0:t.cloneNode(!0);(i=t==null?void 0:t.parentElement)==null||i.appendChild(n),n.style.margin="initial",n.querySelectorAll("tr").forEach((o,s)=>{s>(e=="b30"?30:40)&&o.remove()}),Fn(n,{backgroundColor:"#113"}).then(async o=>{if(n.remove(),o==null)return alert("[chuni-intl-viewer] Something went wrong when converting your scores to PNG. Please ask the author to fix it.");if(He()){const s=new File([o],`result_${e}.png`,{type:o.type});navigator!=null&&navigator.canShare({files:[s]})&&navigator.share({files:[s]}).catch(console.log)}else $("<a>").attr({download:`result_${e}.png`,href:window.URL.createObjectURL(o)})[0].click()})}function Dn(e){Y(e,"svelte-zleki2",".btn-container.svelte-zleki2{position:fixed;bottom:1rem;right:1rem;display:flex;flex-direction:column;gap:0.75rem}.btn.svelte-zleki2{width:2.5rem;height:2.5rem;background:#536;border-radius:50%;box-shadow:0.2rem 0.2rem 5px #000;display:inline-flex;justify-content:center;align-items:center;opacity:0.6;cursor:pointer;transition-duration:0.2s}.btn.svelte-zleki2:hover{opacity:0.9}.btn.disabled.svelte-zleki2{opacity:0.2;cursor:unset}")}function On(e){let t,n,r,i,o,s;return{c(){t=m("div"),n=m("div"),n.innerHTML='<svg width="18" height="18"><path d="M7 2H11V8H15L9 14 3 8H7V2ZM3 14H15V16H3V14Z" fill="#fef"></path></svg>',r=_(),i=m("div"),i.innerHTML='<svg width="18" height="18" xmlns="http://www.w3.org/2000/svg"><path d="M2 4H16V6H2V4ZM2 8H16V10H2V8ZM2 12H16V14H2V12Z" fill="#fef"></path></svg>',w(n,"class","btn svelte-zleki2"),F(n,"disabled",e[0]!="Rating"),w(i,"class","btn svelte-zleki2"),w(t,"class","btn-container svelte-zleki2")},m(l,c){k(l,t,c),d(t,n),d(t,r),d(t,i),o||(s=[W(n,"click",e[1]),W(i,"click",we.toggle)],o=!0)},p(l,[c]){c&1&&F(n,"disabled",l[0]!="Rating")},i:v,o:v,d(l){l&&x(t),o=!1,K(s)}}}function Bn(e,t,n){let r;return Q(e,ne,o=>n(0,r=o)),[r,()=>{r=="Rating"&&Mn()}]}class Vn extends te{constructor(t){super(),ee(this,t,Bn,On,U,{},Dn)}}function Hn(e){Y(e,"svelte-e8mbwb",'label.svelte-e8mbwb.svelte-e8mbwb{position:relative;width:4.5rem;height:2rem;display:inline-block}input.svelte-e8mbwb.svelte-e8mbwb{width:0;height:0;opacity:0}input.svelte-e8mbwb:checked+span.svelte-e8mbwb{background-color:#739}input.svelte-e8mbwb:checked+span.svelte-e8mbwb:before{transform:translateX(2.5rem)}input.svelte-e8mbwb:checked+span.svelte-e8mbwb:after{content:"ON";left:0.6rem;right:initial}span.svelte-e8mbwb.svelte-e8mbwb{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#345;transition:0.2s;border-radius:2rem}span.svelte-e8mbwb.svelte-e8mbwb:after{position:absolute;content:"OFF";display:flex;align-items:center;height:100%;right:0.6rem}span.svelte-e8mbwb.svelte-e8mbwb:before{position:absolute;content:"";height:1.6rem;width:1.6rem;left:0.2rem;bottom:0.2rem;background-color:#ccd;transition:0.2s;border-radius:50%}')}function In(e){let t,n,r,i,o,s;return{c(){t=m("label"),n=m("input"),r=_(),i=m("span"),w(n,"type","checkbox"),w(n,"class","svelte-e8mbwb"),w(i,"class","svelte-e8mbwb"),w(t,"class","svelte-e8mbwb")},m(l,c){k(l,t,c),d(t,n),n.checked=e[0],d(t,r),d(t,i),o||(s=W(n,"change",e[1]),o=!0)},p(l,[c]){c&1&&(n.checked=l[0])},i:v,o:v,d(l){l&&x(t),o=!1,s()}}}function Un(e,t,n){let{checked:r=!1}=t;function i(){r=this.checked,n(0,r)}return e.$$set=o=>{"checked"in o&&n(0,r=o.checked)},[r,i]}class Wn extends te{constructor(t){super(),ee(this,t,Un,In,U,{checked:0},Hn)}}function Gn(e){Y(e,"svelte-1kw99pa",".modal-wrapper.svelte-1kw99pa{position:fixed;top:0;left:0;width:100vw;height:100vh;display:flex;align-items:center}.modal-wrapper.hidden.svelte-1kw99pa{display:none}.modal-bg.svelte-1kw99pa{position:fixed;background:rgba(0, 0, 0, 0.2666666667);top:0;left:0;width:100vw;height:100vh}.modal.svelte-1kw99pa{background:#123;width:70%;margin:auto;padding:2rem;position:relative;box-shadow:2rem 2rem 10px rgba(0, 0, 0, 0.4);border-radius:1rem;text-align:left}h3.svelte-1kw99pa{margin:0}.config-content.svelte-1kw99pa{padding:5px}label.svelte-1kw99pa{display:flex;padding:0.5rem;flex-direction:column;gap:0.5rem}select.svelte-1kw99pa{width:100%;padding:0.75rem;background:#123;border:#345 2px solid;border-radius:0.5rem;color:inherit;cursor:pointer;text-align:left;appearance:none}.close-btn.svelte-1kw99pa{position:absolute;top:0.5rem;right:0.5rem;width:2rem;height:2rem;background:#566;border-radius:50%;display:inline-flex;justify-content:center;align-items:center;opacity:0.6;transition-duration:0.2s;cursor:pointer}.close-btn.svelte-1kw99pa:hover{opacity:0.9}")}function Jn(e){let t,n,r,i,o,s,l,c,a,f,u,h,g,p,y,b,C,I,re,j,ie,ue,T,J,q,X,fe;function Se(R){e[4](R)}let de={};return e[2]!==void 0&&(de.checked=e[2]),T=new Wn({props:de}),Ce.push(()=>jt(T,"checked",Se)),{c(){t=m("div"),n=m("div"),r=_(),i=m("div"),o=m("div"),o.textContent="\u2715",s=_(),l=m("h3"),l.textContent="Options",c=_(),a=m("div"),f=m("label"),u=m("span"),u.textContent="Sort By",h=_(),g=m("select"),p=m("option"),p.textContent="Rating",y=m("option"),y.textContent="Score",b=m("option"),b.textContent="Chart Constant",C=m("option"),C.textContent="Title",I=m("option"),I.textContent="AJ\uFF0FFC",re=_(),j=m("label"),ie=m("span"),ie.textContent="Show Only B40",ue=_(),V(T.$$.fragment),w(n,"class","modal-bg svelte-1kw99pa"),w(o,"class","close-btn svelte-1kw99pa"),w(l,"class","svelte-1kw99pa"),p.__value="Rating",p.value=p.__value,p.selected=!0,y.__value="Score",y.value=y.__value,b.__value="Const",b.value=b.__value,C.__value="Title",C.value=C.__value,I.__value="AJ",I.value=I.__value,w(g,"class","svelte-1kw99pa"),e[1]===void 0&&ge(()=>e[3].call(g)),w(f,"class","svelte-1kw99pa"),w(j,"class","svelte-1kw99pa"),w(a,"class","config-content svelte-1kw99pa"),w(i,"class","modal svelte-1kw99pa"),w(t,"class","modal-wrapper svelte-1kw99pa"),F(t,"hidden",!e[0])},m(R,Z){k(R,t,Z),d(t,n),d(t,r),d(t,i),d(i,o),d(i,s),d(i,l),d(i,c),d(i,a),d(a,f),d(f,u),d(f,h),d(f,g),d(g,p),d(g,y),d(g,b),d(g,C),d(g,I),qe(g,e[1]),d(a,re),d(a,j),d(j,ie),d(j,ue),M(T,j,null),q=!0,X||(fe=[W(n,"click",we.toggle),W(o,"click",we.toggle),W(g,"change",e[3])],X=!0)},p(R,[Z]){Z&2&&qe(g,R[1]);const S={};!J&&Z&4&&(J=!0,S.checked=R[2],Pt(()=>J=!1)),T.$set(S),Z&1&&F(t,"hidden",!R[0])},i(R){q||(P(T.$$.fragment,R),q=!0)},o(R){L(T.$$.fragment,R),q=!1},d(R){R&&x(t),D(T),X=!1,K(fe)}}}function qn(e,t,n){let r,i,o;Q(e,we,c=>n(0,r=c)),Q(e,ne,c=>n(1,i=c)),Q(e,ve,c=>n(2,o=c));function s(){i=Ct(this),ne.set(i)}function l(c){o=c,ve.set(o)}return[r,i,o,s,l]}class Xn extends te{constructor(t){super(),ee(this,t,qn,Jn,U,{},Gn)}}function Zn(e){Y(e,"svelte-lnlob1",".overview-title.svelte-lnlob1{color:#c9e;font-size:small;grid-column:1;justify-self:end}.overview-content.svelte-lnlob1{justify-self:start;grid-column:2}")}function Kn(e){let t,n,r,i,o;return{c(){t=m("span"),n=E(e[0]),r=_(),i=m("span"),o=E(e[1]),w(t,"class","overview-title svelte-lnlob1"),w(i,"class","overview-content svelte-lnlob1")},m(s,l){k(s,t,l),d(t,n),k(s,r,l),k(s,i,l),d(i,o)},p(s,[l]){l&1&&O(n,s[0]),l&2&&O(o,s[1])},i:v,o:v,d(s){s&&x(t),s&&x(r),s&&x(i)}}}function Qn(e,t,n){let{title:r}=t,{content:i}=t;return e.$$set=o=>{"title"in o&&n(0,r=o.title),"content"in o&&n(1,i=o.content)},[r,i]}class $e extends te{constructor(t){super(),ee(this,t,Qn,Kn,U,{title:0,content:1},Zn)}}function Yn(e){Y(e,"svelte-xn0ggy","div#chuni-overview.svelte-xn0ggy.svelte-xn0ggy{border:#547 3px solid;border-radius:0.5rem;background-color:#224;width:fit-content;padding:0.5rem;margin:0.5rem;display:grid;align-items:center;width:calc(100% - 2rem - 6px)}div#chuni-overview.svelte-xn0ggy .stats-name.svelte-xn0ggy{grid-column:1;width:max-content;justify-self:center}div#chuni-overview.svelte-xn0ggy .stats-rating.svelte-xn0ggy{grid-column:2;justify-self:center}div#chuni-overview.svelte-xn0ggy .stats-honor.svelte-xn0ggy{grid-area:2/1/3/3;color:#998;background:#113;border-radius:3px;padding:5px;margin:0 20px}div#chuni-overview.svelte-xn0ggy .stats-honor.stats-honor-normal.svelte-xn0ggy{color:#998}div#chuni-overview.svelte-xn0ggy .stats-honor.stats-honor-bronze.svelte-xn0ggy{color:#d83}div#chuni-overview.svelte-xn0ggy .stats-honor.stats-honor-silver.svelte-xn0ggy{color:#ddd}div#chuni-overview.svelte-xn0ggy .stats-honor.stats-honor-gold.svelte-xn0ggy{color:#fb4}div#chuni-overview.svelte-xn0ggy .stats-honor.stats-honor-rainbow.svelte-xn0ggy{color:#6e8}div#chuni-overview.svelte-xn0ggy .overview-items.svelte-xn0ggy{width:fit-content;display:grid;grid-area:1/3/3/4;gap:5px;padding:5px}")}function Nn(e){return{c:v,m:v,p:v,d:v}}function er(e){let t,n=e[2].name+"",r,i,o,s=e[2].rating+"",l,c,a,f=e[2].honor.text+"",u;return{c(){t=m("h2"),r=E(n),i=_(),o=m("h2"),l=E(s),c=_(),a=m("div"),u=E(f),w(t,"class","stats-name svelte-xn0ggy"),w(o,"class","stats-rating svelte-xn0ggy"),w(a,"class","stats-honor stats-honor-"+e[2].honor.type+" svelte-xn0ggy")},m(h,g){k(h,t,g),d(t,r),k(h,i,g),k(h,o,g),d(o,l),k(h,c,g),k(h,a,g),d(a,u)},p:v,d(h){h&&x(t),h&&x(i),h&&x(o),h&&x(c),h&&x(a)}}}function tr(e){return{c:v,m:v,p:v,d:v}}function nr(e){return{c:v,m:v,p:v,i:v,o:v,d:v}}function rr(e){let t,n;return t=new $e({props:{title:"Recent 10 AVG",content:e[1].toFixed(2)}}),{c(){V(t.$$.fragment)},m(r,i){M(t,r,i),n=!0},p:v,i(r){n||(P(t.$$.fragment,r),n=!0)},o(r){L(t.$$.fragment,r),n=!1},d(r){D(t,r)}}}function ir(e){return{c:v,m:v,p:v,i:v,o:v,d:v}}function or(e){let t,n,r,i,o,s,l,c,a,f,u={ctx:e,current:null,token:null,hasCatch:!1,pending:tr,then:er,catch:Nn,value:2};ze(Bt(),u),i=new $e({props:{title:"Generated at",content:new Date().toLocaleDateString()}}),s=new $e({props:{title:"Best 30 AVG",content:Ae(e[0]).toFixed(2)}});let h={ctx:e,current:null,token:null,hasCatch:!1,pending:ir,then:rr,catch:nr,value:1,blocks:[,,,]};return ze(Vt(),h),a=new $e({props:{title:"Max Possible",content:Ze(e[0]).toFixed(2)}}),{c(){t=m("div"),u.block.c(),n=_(),r=m("div"),V(i.$$.fragment),o=_(),V(s.$$.fragment),l=_(),h.block.c(),c=_(),V(a.$$.fragment),w(r,"class","overview-items svelte-xn0ggy"),w(t,"id","chuni-overview"),w(t,"class","svelte-xn0ggy")},m(g,p){k(g,t,p),u.block.m(t,u.anchor=null),u.mount=()=>t,u.anchor=n,d(t,n),d(t,r),M(i,r,null),d(r,o),M(s,r,null),d(r,l),h.block.m(r,h.anchor=null),h.mount=()=>r,h.anchor=c,d(r,c),M(a,r,null),f=!0},p(g,[p]){e=g,Le(u,e,p);const y={};p&1&&(y.content=Ae(e[0]).toFixed(2)),s.$set(y),Le(h,e,p);const b={};p&1&&(b.content=Ze(e[0]).toFixed(2)),a.$set(b)},i(g){f||(P(i.$$.fragment,g),P(s.$$.fragment,g),P(h.block),P(a.$$.fragment,g),f=!0)},o(g){L(i.$$.fragment,g),L(s.$$.fragment,g);for(let p=0;p<3;p+=1){const y=h.blocks[p];L(y)}L(a.$$.fragment,g),f=!1},d(g){g&&x(t),u.block.d(),u.token=null,u=null,D(i),D(s),h.block.d(),h.token=null,h=null,D(a)}}}function sr(e,t,n){let{ratingList:r}=t;return e.$$set=i=>{"ratingList"in i&&n(0,r=i.ratingList)},[r]}class lr extends te{constructor(t){super(),ee(this,t,sr,or,U,{ratingList:0},Yn)}}function cr(e){Y(e,"svelte-1jox4lr","body.svelte-1jox4lr.svelte-1jox4lr{padding-top:1rem;background-color:#103;color:#eec;margin:0;font-size:14px;min-height:100%;min-width:fit-content}body.svelte-1jox4lr a.svelte-1jox4lr{color:#3cc;text-decoration:none}main.svelte-1jox4lr.svelte-1jox4lr{width:fit-content;margin:auto}footer.svelte-1jox4lr.svelte-1jox4lr{padding:10px}")}function ar(e){return{c:v,m:v,p:v,i:v,o:v,d:v}}function ur(e){let t,n,r,i,o,s,l;return n=new lr({props:{ratingList:e[1].map(hr)}}),i=new Wt({props:{recordList:e[1]}}),s=new Vn({}),{c(){t=m("main"),V(n.$$.fragment),r=_(),V(i.$$.fragment),o=_(),V(s.$$.fragment),w(t,"class","svelte-1jox4lr")},m(c,a){k(c,t,a),M(n,t,null),d(t,r),M(i,t,null),k(c,o,a),M(s,c,a),l=!0},p:v,i(c){l||(P(n.$$.fragment,c),P(i.$$.fragment,c),P(s.$$.fragment,c),l=!0)},o(c){L(n.$$.fragment,c),L(i.$$.fragment,c),L(s.$$.fragment,c),l=!1},d(c){c&&x(t),D(n),D(i),c&&x(o),D(s,c)}}}function fr(e){let t,n,r,i,o,s,l;return{c(){t=m("h3"),t.textContent="Chunithm International Score Viewer",n=_(),r=m("div"),i=m("p"),i.textContent="Loading...",o=_(),s=m("p"),l=E(e[0])},m(c,a){k(c,t,a),k(c,n,a),k(c,r,a),d(r,i),d(r,o),d(r,s),d(s,l)},p(c,a){a&1&&O(l,c[0])},i:v,o:v,d(c){c&&x(t),c&&x(n),c&&x(r)}}}function dr(e){let t,n,r,i,o,s,l={ctx:e,current:null,token:null,hasCatch:!1,pending:fr,then:ur,catch:ar,value:1,blocks:[,,,]};return ze(Ot(),l),r=new Xn({}),{c(){t=m("body"),l.block.c(),n=_(),V(r.$$.fragment),i=_(),o=m("footer"),o.innerHTML=`<span><a href="https://github.com/Dogeon188/chuni_new_intl_viewer" target="_blank" rel="noopener noreferrer" class="svelte-1jox4lr">Source</a> 
        </span><br/> 
        <span>Original &amp; most works by <a href="https://github.com/kyroslee/chuni_intl_viewer" target="_blank" rel="noopener noreferrer" class="svelte-1jox4lr">kyroslee</a> 
        </span><br/> 
        <span>Mostly inspired by <a href="https://github.com/caxerx/chuni_intl_viewer" target="_blank" rel="noopener noreferrer" class="svelte-1jox4lr">caxerx</a></span>`,w(o,"class","svelte-1jox4lr"),w(t,"class","svelte-1jox4lr")},m(c,a){k(c,t,a),l.block.m(t,l.anchor=null),l.mount=()=>t,l.anchor=n,d(t,n),M(r,t,null),d(t,i),d(t,o),s=!0},p(c,[a]){e=c,Le(l,e,a)},i(c){s||(P(l.block),P(r.$$.fragment,c),s=!0)},o(c){for(let a=0;a<3;a+=1){const f=l.blocks[a];L(f)}L(r.$$.fragment,c),s=!1},d(c){c&&x(t),l.block.d(),l.token=null,l=null,D(r)}}}const hr=e=>e.rating;function gr(e,t,n){let r;return Q(e,be,i=>n(0,r=i)),[r]}class pr extends te{constructor(t){super(),ee(this,t,gr,dr,U,{},cr)}}async function mr(){if(window.chuniIntlViewer){alert("[chuni-intl-viewer] Please refresh the page before another new fetch.");return}if(window.chuniIntlViewer=!0,window.location.hostname!=="chunithm-net-eng.com"){alert("[chuni_intl_viewer] This tools could only be used under chunithm-net international."),window.location.href="https://chunithm-net-eng.com/";return}if(!Ve("_t")){alert("[chuni-intl-viewer] Token not found. Please login first."),window.location.href="https://chunithm-net-eng.com/";return}const e=document.body.attachShadow({mode:"open"});new pr({target:e})}mr()})();
